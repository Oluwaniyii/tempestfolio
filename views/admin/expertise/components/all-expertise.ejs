<div class="col-md-12" >
    <div class="row" id="expertise"></div>

</div>

<!-- Component Based Javascript -->
<script>
const app_home_url = "<%= globals.app_home_url %>";

 function loadSkills(){
        const expertiseHolder = document.getElementById("expertise");
        expertiseHolder.innerHTML = "";

        const url = `${app_home_url}/api/expertise`;
        const xhr  =  new XMLHttpRequest();
        xhr.open("GET", url);
        xhr.send();
    
        xhr.onload = function(){
            if(this.status < 399) {
               const response =  JSON.parse(this.responseText);

               let skills = response.data;

               if(!skills.length) return expertiseHolder.innerHTML = "<p>You have no skill registered yet</p>";


               skills.forEach(skill=>{
                   expertiseHolder.innerHTML += renderExpertiseComponent(skill);
               })

            
            }else{
                return expertiseHolder.innerHTML = "<p>Could not load data at the moment</p>";
            }
        }
 }
 
 loadSkills();


 function renderExpertiseComponent(expertise){
    let expertiseComponent = `
    <div class="col-md-6">
        <div class="main-card mb-1 pb-0 card">
            <div class="card-body">
                <h5
                    style="
                        display: flex;
                        flex-direction: column;
                        align-items: start;
                        justify-content: space-between;
                    "
                >
                    <p
                        class="font-weight-bold text-secondary mb-2"
                        style="font-size: 1.5rem; text-transform: capitalize"
                    >
                       ${expertise.name}
                    </p>

                    <small>
                        <div style="opacity: 0.7; margin-left: 0px">
                            <span
                                class="dot"
                                style="
                                    display: inline-block;
                                    width: 5px;
                                    height: 5px;
                                    border-radius: 50%;
                                    background: lightseagreen;
                                    margin-left: 0px 3px;
                                "
                            ></span>
                            <span class="technology" style="font-size: 1.42rem"
                                >
                                ${expertise.rating}
                                %</span
                            >
                        </div>
                    </small>
                </h5>

                <div class="skill-icon">
                    <img
                        src="${expertise.icon.url}"
                        alt=""
                        style="height: 150px"
                    />
                </div>
            </div>
        </div>
    </div>
`

     return expertiseComponent;
 }


</script>
