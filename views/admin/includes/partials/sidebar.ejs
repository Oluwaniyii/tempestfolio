<div class="app-sidebar sidebar-shadow">
  <div class="app-header__logo">
    <div class="logo-src"></div>
    <div class="header__pane ml-auto">
      <div>
        <button
          type="button"
          class="hamburger close-sidebar-btn hamburger--elastic"
          data-class="closed-sidebar"
        >
          <span class="hamburger-box">
            <span class="hamburger-inner"></span>
          </span>
        </button>
      </div>
    </div>
  </div>
  <div class="app-header__mobile-menu">
    <div>
      <button
        type="button"
        class="hamburger hamburger--elastic mobile-toggle-nav"
      >
        <span class="hamburger-box">
          <span class="hamburger-inner"></span>
        </span>
      </button>
    </div>
  </div>
  <div class="app-header__menu">
    <span>
      <button
        type="button"
        class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav"
      >
        <span class="btn-icon-wrapper">
          <i class="fa fa-ellipsis-v fa-w-6"></i>
        </span>
      </button>
    </span>
  </div>
  <div class="scrollbar-sidebar">
    <div class="app-sidebar__inner">
      <ul class="vertical-nav-menu">
        <!-- <li class="app-sidebar__heading">Dashboards</li>
        <li>
          <a href="index.html">
            <i class="metismenu-icon pe-7s-rocket"></i>
            Dashboard Example 1
          </a>
        </li> -->
        <!-- PPPPPPP -->
        <!-- PPPPPPP -->
        <!-- PPPPPPP -->
        <li class="app-sidebar__heading">CV Development</li>
        <li>
          <a href="/admin/service">
            <i class="metismenu-icon pe-7s-arc"> </i>Services
          </a>
        </li>
        <li>
          <a href="/admin/resume">
            <i class="metismenu-icon pe-7s-id"> </i>resume
          </a>
        </li>
        <li>
          <a href="/admin/experience">
            <i class="metismenu-icon pe-7s-clock"> </i>experience
          </a>
        </li>
        <li>
          <a href="/admin/project">
            <i class="metismenu-icon pe-7s-rocket"> </i>project
          </a>
        </li>
        <li>
          <a href="/admin/expertise">
            <i class="metismenu-icon pe-7s-gleam"> </i> expertise
          </a>
        </li>

        <li>
          <a href="/admin/blog">
            <i class="metismenu-icon pe-7s-note"> </i> blogs
          </a>
        </li>
        <!-- PPPPPPP -->
        <!-- PPPPPPP -->
        <!-- PPPPPPP -->
        <li class="app-sidebar__heading">Managements</li>
        <li>
          <a href="/admin/mail">
            <i class="metismenu-icon pe-7s-mail"> </i> 
            <span>
              Mail
              <span id="message-count" 
              style="
              padding: 3px;
              color: #fff;
              text-align: center;
              background: #e46060e7;
              border-radius: 50%;
              font-size: 10px;
              font-weight: 500;
              width: 20px;
              height: 20px;
              line-height: 20px;
              visibility: hidden;
              " 
              >
              </span>
            </span>
          </a>
        </li>
        <li>
          <a href="/admin/profile">
            <i class="metismenu-icon pe-7s-user"> </i>profile
          </a>
        </li>
        <li>
          <a href="/auth/logout">
            <i class="metismenu-icon pe-7s-power  icon-gradient bg-love-kiss" style="opacity: .91;"> </i> logout
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>
<!-- Component Based Javascript -->
<script>
   function fetchUnreadMails(callbackAction){
    let url = `/api/mail?filter=read.false&entries=5`;

    const xhr  =  new XMLHttpRequest();

        xhr.onload = function(){
            if(this.status > 399) return;
            
            const mailsPage = (JSON.parse(this.responseText)).data;
            callbackAction(mailsPage);
        }

        xhr.open('GET', url);
        xhr.send();

   }

  //  fetchUnreadMails();
   
   (function loookOutForNewUnreadMails(){
     setInterval(()=>{
       fetchUnreadMails((mailsPage)=>{
           let messageCountElem = document.getElementById('message-count');

           if(mailsPage.chunk.length < 1){
              messageCountElem.style.visibility = "hidden";
           }
           else{
             messageCountElem.style.visibility = "visible";
             messageCountElem.textContent = ( mailsPage.chunk.length > 4 ) ? "4+" : '+' + mailsPage.chunk.length; 
           }

       });
      }, 1000);
   })();

</script>
